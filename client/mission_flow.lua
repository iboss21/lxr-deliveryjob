local AB,AM=nil,nil
RegisterNetEvent('lxr:supreme:begin',function(bi,mi,m) AB,AM=bi,mi; if lib and lib.notify then lib.notify({title='Delivery',description=locale('mission_start',m.label or m.id or ''),type='success'}) end end)
CreateThread(function() while true do if AB and AM then local b=Config.Boards[AB]; local m=b and b.deliveries[AM]; if m then local veh=GetVehiclePedIsIn(PlayerPedId(),false); if veh~=0 then local pos=GetEntityCoords(veh); local d=#(pos-m.to); if d<180.0 then DrawMarker(1,m.to.x,m.to.y,m.to.z-1.0,0,0,0,0,0,0,1.2,1.2,0.5,255,255,255,100,false,false,2,false,nil,nil,false); if d<6.0 then FinishMission(AB,AM); AB,AM=nil,nil end end end end end Wait(500) end end)
RegisterNetEvent('lxr:supreme:end',function(reason,reward,dmg) if lib and lib.notify then if reason=='complete' then lib.notify({title='Delivery',description=locale('mission_complete',reward or 0),type='success'}) else lib.notify({title='Delivery',description=locale('mission_fail'),type='error'}) end end end)
